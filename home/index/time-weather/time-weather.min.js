window.addEventListener("load",function(){function e(){const e=new Date,t=e.toLocaleTimeString("zh-CN"),n=e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"});document.getElementById("current-time").textContent=t,document.getElementById("current-date").textContent=n}async function t(){const e="6d15c068d27df6c6db96b8dad0184362",t="gopqiqfgjtpiyfeh",n="cngzTkhrTXdxTStySWphY0ZuM2FtQT09";try{const a=await fetch(`https://www.mxnzp.com/api/ip/self?app_id=${t}&app_secret=${n}`),c=await a.json();if(1!==c.code)throw new Error("定位失败");const o=c.data.cityId,i=await fetch(`https://restapi.amap.com/v3/weather/weatherInfo?key=${e}&city=${o}&extensions=base`),r=await i.json();if("1"!==r.status||!r.lives?.length)throw new Error("天气接口错误");const d=r.lives[0];document.getElementById("weather-text").innerHTML=`${d.province} ${d.city} ${d.weather}，${d.temperature}°C　${d.winddirection}${d.windpower}级　湿度${d.humidity}%`}catch(e){console.error("天气获取失败：",e),document.getElementById("weather-text").textContent="天气获取失败"}}e(),setInterval(e,1e3),t(),setInterval(t,6e5)});
